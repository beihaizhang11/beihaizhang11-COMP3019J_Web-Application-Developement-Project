{% extends "base.html" %}
{% block content %}
<h2>{{ post.post_title }}</h2>
<p>{{ post.post_content }}</p>
<p>Posted by {{ post.author.username }} on {{ post.post_date.strftime('%Y-%m-%d %H:%M') }}</p>

<h3>Replies</h3>
<ul>
    {% for reply in replies %}
    <li>
        <p>{{ reply.reply_content }}</p>
        <small>by {{ reply.replier.username }} on {{ reply.reply_date.strftime('%Y-%m-%d %H:%M') }}</small>
    </li>
    {% endfor %}
</ul>
{% if replies|length == 0 %}
    <p>No replies yet. Be the first to respond!</p>
{% endif %}

{% if current_user.is_authenticated %}
<h3>Leave a Reply</h3>
<form method="POST">
    {{ form.hidden_tag() }}
    <div>{{ form.reply_content.label }} {{ form.reply_content(rows=5) }}</div>
    <div>{{ form.submit() }}</div>
</form>
{% else %}
<p><a href="{{ url_for('main.login') }}">Log in</a> to leave a reply.</p>
{% endif %}
{% endblock %}
